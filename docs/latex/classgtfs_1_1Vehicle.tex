\hypertarget{classgtfs_1_1Vehicle}{}\section{gtfs\+:\+:Vehicle Class Reference}
\label{classgtfs_1_1Vehicle}\index{gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}}


{\ttfamily \#include $<$gtfs.\+h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classgtfs_1_1Vehicle_ac3f8111a611378f5f8b29f7465e48919}{Vehicle} (std\+::string id)
\item 
\hyperlink{classgtfs_1_1Vehicle_adf892e71483b7f9005846599fd0308e6}{Vehicle} (std\+::string id, unsigned int n)
\item 
\hyperlink{classgtfs_1_1Vehicle_a08c7450dd0df9406f78b30be044d27d8}{$\sim$\+Vehicle} ()
\item 
void \hyperlink{classgtfs_1_1Vehicle_a47ceaf4bb31c01dd4b26a12f1b7b7089}{set\+\_\+trip} (std\+::shared\+\_\+ptr$<$ \hyperlink{classgtfs_1_1Trip}{Trip} $>$ tp)
\item 
std\+::string \hyperlink{classgtfs_1_1Vehicle_a1586a271d8c8d7eb61f6f1fac5491e26}{get\+\_\+id} () const 
\item 
std\+::vector$<$ \hyperlink{classgtfs_1_1Particle}{Particle} $>$ \& \hyperlink{classgtfs_1_1Vehicle_a7b12b079c68880f00f532ca25858c368}{get\+\_\+particles} ()
\item 
const std\+::shared\+\_\+ptr$<$ \hyperlink{classgtfs_1_1Trip}{Trip} $>$ \& \hyperlink{classgtfs_1_1Vehicle_a347033bb5e55c8af3abdb68b1a13462a}{get\+\_\+trip} () const 
\item 
const \hyperlink{classgps_1_1Coord}{gps\+::\+Coord} \& \hyperlink{classgtfs_1_1Vehicle_a30f091d1b875adbef1423e9dbedbab4e}{get\+\_\+position} () const 
\item 
const uint64\+\_\+t \& \hyperlink{classgtfs_1_1Vehicle_acb6df64b36b7fa25132ff97c2a1e434d}{get\+\_\+timestamp} () const 
\item 
int \hyperlink{classgtfs_1_1Vehicle_ad273d29ef8020e572bfc978bf39775a4}{get\+\_\+delta} () const 
\item 
bool \hyperlink{classgtfs_1_1Vehicle_a0224421a07ed4b2f8ce68dd337a772ad}{is\+\_\+initialized} () const 
\item 
void \hyperlink{classgtfs_1_1Vehicle_a4baee648ab1db5b69aa2ffef7203c2bf}{update} (\hyperlink{classsampling_1_1RNG}{sampling\+::\+R\+NG} \&rng)
\item 
void \hyperlink{classgtfs_1_1Vehicle_add9266d843398c88d3fcc22239f586a9}{update} (const transit\+\_\+realtime\+::\+Vehicle\+Position \&vp, \hyperlink{classgtfs_1_1GTFS}{G\+T\+FS} \&gtfs)
\item 
void \hyperlink{classgtfs_1_1Vehicle_ae9944f06fb0bde02f2d7c21f2dc33787}{update} (const transit\+\_\+realtime\+::\+Trip\+Update \&tu, \hyperlink{classgtfs_1_1GTFS}{G\+T\+FS} \&gtfs)
\item 
unsigned long \hyperlink{classgtfs_1_1Vehicle_aa9087e973a9821f384ec47f51bdcedc7}{allocate\+\_\+id} ()
\item 
void \hyperlink{classgtfs_1_1Vehicle_a8367fc70a64b7e596422f880dbff1193}{resample} (\hyperlink{classsampling_1_1RNG}{sampling\+::\+R\+NG} \&rng)
\item 
void \hyperlink{classgtfs_1_1Vehicle_a63474849e632ce31730b120debe50792}{reset} (void)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
unsigned int \hyperlink{classgtfs_1_1Vehicle_aa21babc8423abf92bbdf5e0748444f44}{n\+\_\+particles}
\item 
unsigned long \hyperlink{classgtfs_1_1Vehicle_aab535dd9953f9650e2adc351965779b1}{next\+\_\+id}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Transit vehicle class

A representation of a physical transit vehicle (i.\+e., a bus), including the most recent data associated with that vehicle (G\+PS location, arrival/departure time, etc).

Vehicles are initialized with an ID, so it is not editable. 

\subsection{Constructor \& Destructor Documentation}
\index{gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}!Vehicle@{Vehicle}}
\index{Vehicle@{Vehicle}!gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}}
\subsubsection[{\texorpdfstring{Vehicle(std\+::string id)}{Vehicle(std::string id)}}]{\setlength{\rightskip}{0pt plus 5cm}gtfs\+::\+Vehicle\+::\+Vehicle (
\begin{DoxyParamCaption}
\item[{std\+::string}]{id}
\end{DoxyParamCaption}
)}\hypertarget{classgtfs_1_1Vehicle_ac3f8111a611378f5f8b29f7465e48919}{}\label{classgtfs_1_1Vehicle_ac3f8111a611378f5f8b29f7465e48919}
Create a \hyperlink{classgtfs_1_1Vehicle}{Vehicle} object with given ID.

Vehicles are created with a default number of particles.


\begin{DoxyParams}{Parameters}
{\em id} & the ID of the vehicle as given in the \hyperlink{classgtfs_1_1GTFS}{G\+T\+FS} feed \\
\hline
\end{DoxyParams}
\index{gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}!Vehicle@{Vehicle}}
\index{Vehicle@{Vehicle}!gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}}
\subsubsection[{\texorpdfstring{Vehicle(std\+::string id, unsigned int n)}{Vehicle(std::string id, unsigned int n)}}]{\setlength{\rightskip}{0pt plus 5cm}gtfs\+::\+Vehicle\+::\+Vehicle (
\begin{DoxyParamCaption}
\item[{std\+::string}]{id, }
\item[{unsigned int}]{n}
\end{DoxyParamCaption}
)}\hypertarget{classgtfs_1_1Vehicle_adf892e71483b7f9005846599fd0308e6}{}\label{classgtfs_1_1Vehicle_adf892e71483b7f9005846599fd0308e6}
Create a vehicle with specified number of particles, and ID.


\begin{DoxyParams}{Parameters}
{\em id} & the ID of the vehicle as given in the \hyperlink{classgtfs_1_1GTFS}{G\+T\+FS} feed \\
\hline
{\em n} & integer specifying the number of particles to initialize the vehicle with \\
\hline
\end{DoxyParams}
\index{gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}!````~Vehicle@{$\sim$\+Vehicle}}
\index{````~Vehicle@{$\sim$\+Vehicle}!gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}}
\subsubsection[{\texorpdfstring{$\sim$\+Vehicle()}{~Vehicle()}}]{\setlength{\rightskip}{0pt plus 5cm}gtfs\+::\+Vehicle\+::$\sim$\+Vehicle (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classgtfs_1_1Vehicle_a08c7450dd0df9406f78b30be044d27d8}{}\label{classgtfs_1_1Vehicle_a08c7450dd0df9406f78b30be044d27d8}
Desctructor for a vehicle object, ensuring all particles are deleted too. 

\subsection{Member Function Documentation}
\index{gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}!allocate\+\_\+id@{allocate\+\_\+id}}
\index{allocate\+\_\+id@{allocate\+\_\+id}!gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}}
\subsubsection[{\texorpdfstring{allocate\+\_\+id()}{allocate_id()}}]{\setlength{\rightskip}{0pt plus 5cm}unsigned long gtfs\+::\+Vehicle\+::allocate\+\_\+id (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classgtfs_1_1Vehicle_aa9087e973a9821f384ec47f51bdcedc7}{}\label{classgtfs_1_1Vehicle_aa9087e973a9821f384ec47f51bdcedc7}
To ensure particles have unique ID\textquotesingle{}s (within a vehicle), the next ID is incremended when requested by a new particle.

\begin{DoxyReturn}{Returns}
the ID for the next particle. 
\end{DoxyReturn}
\index{gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}!get\+\_\+delta@{get\+\_\+delta}}
\index{get\+\_\+delta@{get\+\_\+delta}!gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}}
\subsubsection[{\texorpdfstring{get\+\_\+delta() const }{get_delta() const }}]{\setlength{\rightskip}{0pt plus 5cm}int gtfs\+::\+Vehicle\+::get\+\_\+delta (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}\hypertarget{classgtfs_1_1Vehicle_ad273d29ef8020e572bfc978bf39775a4}{}\label{classgtfs_1_1Vehicle_ad273d29ef8020e572bfc978bf39775a4}
\begin{DoxyReturn}{Returns}
time in seconds since the previous observation 
\end{DoxyReturn}
\index{gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}!get\+\_\+id@{get\+\_\+id}}
\index{get\+\_\+id@{get\+\_\+id}!gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}}
\subsubsection[{\texorpdfstring{get\+\_\+id() const }{get_id() const }}]{\setlength{\rightskip}{0pt plus 5cm}std\+::string gtfs\+::\+Vehicle\+::get\+\_\+id (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}\hypertarget{classgtfs_1_1Vehicle_a1586a271d8c8d7eb61f6f1fac5491e26}{}\label{classgtfs_1_1Vehicle_a1586a271d8c8d7eb61f6f1fac5491e26}
\begin{DoxyReturn}{Returns}
ID of vehicle 
\end{DoxyReturn}
\index{gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}!get\+\_\+particles@{get\+\_\+particles}}
\index{get\+\_\+particles@{get\+\_\+particles}!gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}}
\subsubsection[{\texorpdfstring{get\+\_\+particles()}{get_particles()}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$ {\bf gtfs\+::\+Particle} $>$ \& gtfs\+::\+Vehicle\+::get\+\_\+particles (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classgtfs_1_1Vehicle_a7b12b079c68880f00f532ca25858c368}{}\label{classgtfs_1_1Vehicle_a7b12b079c68880f00f532ca25858c368}
\begin{DoxyReturn}{Returns}
vector of particle references (so they can be mofidied ...) 
\end{DoxyReturn}
\index{gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}!get\+\_\+position@{get\+\_\+position}}
\index{get\+\_\+position@{get\+\_\+position}!gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}}
\subsubsection[{\texorpdfstring{get\+\_\+position() const }{get_position() const }}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf gps\+::\+Coord}\& gtfs\+::\+Vehicle\+::get\+\_\+position (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classgtfs_1_1Vehicle_a30f091d1b875adbef1423e9dbedbab4e}{}\label{classgtfs_1_1Vehicle_a30f091d1b875adbef1423e9dbedbab4e}
Return the vehicle\textquotesingle{}s position \index{gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}!get\+\_\+timestamp@{get\+\_\+timestamp}}
\index{get\+\_\+timestamp@{get\+\_\+timestamp}!gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}}
\subsubsection[{\texorpdfstring{get\+\_\+timestamp() const }{get_timestamp() const }}]{\setlength{\rightskip}{0pt plus 5cm}const uint64\+\_\+t\& gtfs\+::\+Vehicle\+::get\+\_\+timestamp (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classgtfs_1_1Vehicle_acb6df64b36b7fa25132ff97c2a1e434d}{}\label{classgtfs_1_1Vehicle_acb6df64b36b7fa25132ff97c2a1e434d}
\begin{DoxyReturn}{Returns}
the time the observation was last taken 
\end{DoxyReturn}
\index{gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}!get\+\_\+trip@{get\+\_\+trip}}
\index{get\+\_\+trip@{get\+\_\+trip}!gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}}
\subsubsection[{\texorpdfstring{get\+\_\+trip() const }{get_trip() const }}]{\setlength{\rightskip}{0pt plus 5cm}const std\+::shared\+\_\+ptr$<$ {\bf Trip} $>$ \& gtfs\+::\+Vehicle\+::get\+\_\+trip (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}\hypertarget{classgtfs_1_1Vehicle_a347033bb5e55c8af3abdb68b1a13462a}{}\label{classgtfs_1_1Vehicle_a347033bb5e55c8af3abdb68b1a13462a}
\begin{DoxyReturn}{Returns}
a pointer to the vehicle\textquotesingle{}s trip object 
\end{DoxyReturn}
\index{gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}!is\+\_\+initialized@{is\+\_\+initialized}}
\index{is\+\_\+initialized@{is\+\_\+initialized}!gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}}
\subsubsection[{\texorpdfstring{is\+\_\+initialized() const }{is_initialized() const }}]{\setlength{\rightskip}{0pt plus 5cm}bool gtfs\+::\+Vehicle\+::is\+\_\+initialized (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classgtfs_1_1Vehicle_a0224421a07ed4b2f8ce68dd337a772ad}{}\label{classgtfs_1_1Vehicle_a0224421a07ed4b2f8ce68dd337a772ad}
\begin{DoxyReturn}{Returns}
logical, if F\+A\+L\+SE it means the vehicle needs to be initialized 
\end{DoxyReturn}
\index{gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}!resample@{resample}}
\index{resample@{resample}!gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}}
\subsubsection[{\texorpdfstring{resample(sampling\+::\+R\+N\+G \&rng)}{resample(sampling::RNG &rng)}}]{\setlength{\rightskip}{0pt plus 5cm}void gtfs\+::\+Vehicle\+::resample (
\begin{DoxyParamCaption}
\item[{{\bf sampling\+::\+R\+NG} \&}]{rng}
\end{DoxyParamCaption}
)}\hypertarget{classgtfs_1_1Vehicle_a8367fc70a64b7e596422f880dbff1193}{}\label{classgtfs_1_1Vehicle_a8367fc70a64b7e596422f880dbff1193}
Perform weighted resampling with replacement.

Use the computed particle weights to resample, with replacement, the particles associated with the vehicle. \index{gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}!reset@{reset}}
\index{reset@{reset}!gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}}
\subsubsection[{\texorpdfstring{reset(void)}{reset(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void gtfs\+::\+Vehicle\+::reset (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{classgtfs_1_1Vehicle_a63474849e632ce31730b120debe50792}{}\label{classgtfs_1_1Vehicle_a63474849e632ce31730b120debe50792}
Reset vehicle\textquotesingle{}s particles to zero-\/state. \index{gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}!set\+\_\+trip@{set\+\_\+trip}}
\index{set\+\_\+trip@{set\+\_\+trip}!gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}}
\subsubsection[{\texorpdfstring{set\+\_\+trip(std\+::shared\+\_\+ptr$<$ Trip $>$ tp)}{set_trip(std::shared_ptr< Trip > tp)}}]{\setlength{\rightskip}{0pt plus 5cm}void gtfs\+::\+Vehicle\+::set\+\_\+trip (
\begin{DoxyParamCaption}
\item[{std\+::shared\+\_\+ptr$<$ {\bf Trip} $>$}]{tp}
\end{DoxyParamCaption}
)}\hypertarget{classgtfs_1_1Vehicle_a47ceaf4bb31c01dd4b26a12f1b7b7089}{}\label{classgtfs_1_1Vehicle_a47ceaf4bb31c01dd4b26a12f1b7b7089}
Specify the vehicles trip. 
\begin{DoxyParams}{Parameters}
{\em tp} & A shared trip pointer \\
\hline
\end{DoxyParams}
\index{gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}!update@{update}}
\index{update@{update}!gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}}
\subsubsection[{\texorpdfstring{update(sampling\+::\+R\+N\+G \&rng)}{update(sampling::RNG &rng)}}]{\setlength{\rightskip}{0pt plus 5cm}void gtfs\+::\+Vehicle\+::update (
\begin{DoxyParamCaption}
\item[{{\bf sampling\+::\+R\+NG} \&}]{rng}
\end{DoxyParamCaption}
)}\hypertarget{classgtfs_1_1Vehicle_a4baee648ab1db5b69aa2ffef7203c2bf}{}\label{classgtfs_1_1Vehicle_a4baee648ab1db5b69aa2ffef7203c2bf}
Update the vehicle state after loading \hyperlink{classgtfs_1_1GTFS}{G\+T\+FS} feeds.

The vehicle\textquotesingle{}s particles will be updated, which involves initialization if the vehicle is starting a new trip, otherwise the particles will be transitioned.

Likelihoods are calculated and weighted resampling takes place.


\begin{DoxyParams}{Parameters}
{\em rng} & A random number generator \\
\hline
\end{DoxyParams}
\index{gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}!update@{update}}
\index{update@{update}!gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}}
\subsubsection[{\texorpdfstring{update(const transit\+\_\+realtime\+::\+Vehicle\+Position \&vp, G\+T\+F\+S \&gtfs)}{update(const transit_realtime::VehiclePosition &vp, GTFS &gtfs)}}]{\setlength{\rightskip}{0pt plus 5cm}void gtfs\+::\+Vehicle\+::update (
\begin{DoxyParamCaption}
\item[{const transit\+\_\+realtime\+::\+Vehicle\+Position \&}]{vp, }
\item[{{\bf G\+T\+FS} \&}]{gtfs}
\end{DoxyParamCaption}
)}\hypertarget{classgtfs_1_1Vehicle_add9266d843398c88d3fcc22239f586a9}{}\label{classgtfs_1_1Vehicle_add9266d843398c88d3fcc22239f586a9}
Update the location of the vehicle object.

This does N\+OT trigger a particle update, as we may need to also insert Trip\+Updates later. Check that the trip\+\_\+id is the same, otherwise set {\ttfamily newtrip = false}


\begin{DoxyParams}{Parameters}
{\em vp} & a vehicle position from the realtime feed \\
\hline
{\em gtfs} & a \hyperlink{classgtfs_1_1GTFS}{G\+T\+FS} object containing the \hyperlink{classgtfs_1_1GTFS}{G\+T\+FS} static data \\
\hline
\end{DoxyParams}
\index{gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}!update@{update}}
\index{update@{update}!gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}}
\subsubsection[{\texorpdfstring{update(const transit\+\_\+realtime\+::\+Trip\+Update \&tu, G\+T\+F\+S \&gtfs)}{update(const transit_realtime::TripUpdate &tu, GTFS &gtfs)}}]{\setlength{\rightskip}{0pt plus 5cm}void gtfs\+::\+Vehicle\+::update (
\begin{DoxyParamCaption}
\item[{const transit\+\_\+realtime\+::\+Trip\+Update \&}]{vp, }
\item[{{\bf G\+T\+FS} \&}]{gtfs}
\end{DoxyParamCaption}
)}\hypertarget{classgtfs_1_1Vehicle_ae9944f06fb0bde02f2d7c21f2dc33787}{}\label{classgtfs_1_1Vehicle_ae9944f06fb0bde02f2d7c21f2dc33787}
Add \hyperlink{classgtfs_1_1Stop}{Stop} Time Updates to the vehicle object.

This does N\+OT trigger a particle update, as we may need to also insert Vehiclevoid\+Positions later.


\begin{DoxyParams}{Parameters}
{\em vp} & a vehicle position from the realtime feed \\
\hline
{\em gtfs} & a \hyperlink{classgtfs_1_1GTFS}{G\+T\+FS} object containing the \hyperlink{classgtfs_1_1GTFS}{G\+T\+FS} static data \\
\hline
\end{DoxyParams}


\subsection{Member Data Documentation}
\index{gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}!n\+\_\+particles@{n\+\_\+particles}}
\index{n\+\_\+particles@{n\+\_\+particles}!gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}}
\subsubsection[{\texorpdfstring{n\+\_\+particles}{n_particles}}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int gtfs\+::\+Vehicle\+::n\+\_\+particles}\hypertarget{classgtfs_1_1Vehicle_aa21babc8423abf92bbdf5e0748444f44}{}\label{classgtfs_1_1Vehicle_aa21babc8423abf92bbdf5e0748444f44}
the number of particles that will be created in the next sample \index{gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}!next\+\_\+id@{next\+\_\+id}}
\index{next\+\_\+id@{next\+\_\+id}!gtfs\+::\+Vehicle@{gtfs\+::\+Vehicle}}
\subsubsection[{\texorpdfstring{next\+\_\+id}{next_id}}]{\setlength{\rightskip}{0pt plus 5cm}unsigned long gtfs\+::\+Vehicle\+::next\+\_\+id}\hypertarget{classgtfs_1_1Vehicle_aab535dd9953f9650e2adc351965779b1}{}\label{classgtfs_1_1Vehicle_aab535dd9953f9650e2adc351965779b1}
the ID of the next particle to be created 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
gtfs/gtfs.\+h\item 
gtfs/Vehicle.\+cpp\end{DoxyCompactItemize}
